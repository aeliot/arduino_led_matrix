#include "LedMatrix.h"
#include "Arduino.h"

Display::Display(int clock, int data, int latch)
{
  
  clockPin = clock;
  dataPin = data;
  latchPin = latch;

  pinMode(dataPin, OUTPUT);
  pinMode(clockPin, OUTPUT);
  pinMode(latchPin, OUTPUT);

  clear();
}

void Display::print()
{
  int k;
  int i;
  for(k = 0; k < 8; k++){
    digitalWrite(latchPin, LOW);
    shiftOut(dataPin, clockPin, LSBFIRST, (1 << k));
    for (i = 0; i < 2; i++){
      shiftOut(dataPin, clockPin, MSBFIRST, imageArray[i][k]);
    }
    digitalWrite(latchPin, HIGH);
  }
}

void Display::clear(){
  int k;
  int i;

  for(k = 0; k < 8; k++){
    for(i = 0; i < 2; i++){
      imageArray[i][k] = 0;
    }
  }
}

void Display::setChar(char dispChar){
  clear();

  switch(dispChar){
  case 'A':
    imageArray[0][0] = 0x30;
    imageArray[0][1] = 0x78;
    imageArray[0][2] = 0xcc;
    imageArray[0][3] = 0xfc;
    imageArray[0][4] = 0xcc;
    imageArray[0][5] = 0xcc;
    imageArray[0][6] = 0xcc;
    break;
  case 'B':
    imageArray[0][0] = 0xf8;
    imageArray[0][1] = 0xcc;
    imageArray[0][2] = 0xcc;
    imageArray[0][3] = 0xf8;
    imageArray[0][4] = 0xcc;
    imageArray[0][5] = 0xcc;
    imageArray[0][6] = 0xf8;
    break;
  }
}
